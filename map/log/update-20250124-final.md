# –õ–æ–≥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π - 24 —è–Ω–≤–∞—Ä—è 2025

## –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### ‚úÖ 1. UI –∫–Ω–æ–ø–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞ —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ SVG

**–§–∞–π–ª:** `src/components/Controls/Controls.tsx`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `Download` –∏–∫–æ–Ω–∫–∏ –∏–∑ lucide-react
- –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç —Ñ—É–Ω–∫—Ü–∏–∏ `exportElementToSVG` –∏–∑ utils/export
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–≠–∫—Å–ø–æ—Ä—Ç SVG" –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö IconElement (—Å—Ç—Ä–æ–∫–∞ 1012-1042):
  - –ó–µ–ª—ë–Ω–∞—è –∫–Ω–æ–ø–∫–∞ —Å –∏–∫–æ–Ω–∫–æ–π Download
  - –í—ã–∑—ã–≤–∞–µ—Ç `exportElementToSVG(iconElement)` –ø—Ä–∏ –∫–ª–∏–∫–µ
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å alert
  - –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∞ –ø–æ—Å–ª–µ –∫–Ω–æ–ø–∫–∏ "–ó–∞–º–µ–Ω–∏—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫—É"

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç (–∏–∫–æ–Ω–∫—É, –∫—Ä—É–≥, –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫) –≤ SVG —Ñ–∞–π–ª
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ SVGO
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∏–ª–µ–π (fill, stroke)

---

### ‚úÖ 2. Potrace WASM –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

**–§–∞–π–ª:** `src/utils/vectorize.ts`

**–î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**

**a) `vectorizeWithPotrace(imageData, options)` (—Å—Ç—Ä–æ–∫–∞ 343-461):**
- –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –º–æ–Ω–æ—Ö—Ä–æ–º–Ω—ã–π SVG —á–µ—Ä–µ–∑ Potrace WASM
- –õ—É—á—à–µ –≤—Å–µ–≥–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —á–µ—Ä–Ω–æ-–±–µ–ª—ã–º–∏ –ª–æ–≥–æ—Ç–∏–ø–∞–º–∏
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
  - `threshold` (0-255, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 128) - –ø–æ—Ä–æ–≥ –¥–ª—è —á/–± –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
  - `turdSize` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 2) - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –º–µ–ª–∫–∏—Ö –¥–µ—Ç–∞–ª–µ–π
  - `optCurve` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é true) - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫—Ä–∏–≤—ã—Ö
  - `color` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é '#000000') - —Ü–≤–µ—Ç –¥–ª—è SVG
- –ü—Ä–æ—Ü–µ—Å—Å:
  1. –°–æ–∑–¥–∞—ë—Ç canvas –∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —á–µ—Ä–Ω–æ-–±–µ–ª–æ–µ
  2. –ü—Ä–∏–º–µ–Ω—è–µ—Ç –ø–æ—Ä–æ–≥ (threshold)
  3. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç potrace-wasm
  4. –í—ã–ø–æ–ª–Ω—è–µ—Ç –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
  5. –î–æ–±–∞–≤–ª—è–µ—Ç xmlns –µ—Å–ª–∏ –Ω—É–∂–Ω–æ

**b) `isImageSuitableForPotrace(imageData)` (—Å—Ç—Ä–æ–∫–∞ 467-516):**
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –ø–æ–¥—Ö–æ–¥–∏—Ç –ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è Potrace
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Ü–≤–µ—Ç–æ–≤
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç true –µ—Å–ª–∏ —Ü–≤–µ—Ç–æ–≤ <= 8 (—á/–± –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ)
- –î–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –º–∞–∫—Å–∏–º—É–º 200x200px

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å:** `PotraceOptions` (—Å—Ç—Ä–æ–∫–∞ 328-333)

**–¢–∏–ø—ã:** –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `src/types/potrace-wasm.d.ts` —Å –¥–µ–∫–ª–∞—Ä–∞—Ü–∏—è–º–∏ —Ç–∏–ø–æ–≤ –¥–ª—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

---

### ‚úÖ 3. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç VectorizationDialog

**–§–∞–π–ª:** `src/components/Toolbar/VectorizationDialog.tsx`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –í—ã–±–æ—Ä –º–µ–∂–¥—É –¥–≤—É–º—è –º–µ—Ç–æ–¥–∞–º–∏:
  - **ImageTracer** - –¥–ª—è —Ü–≤–µ—Ç–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
  - **Potrace** - –¥–ª—è —á–µ—Ä–Ω–æ-–±–µ–ª—ã—Ö –ª–æ–≥–æ—Ç–∏–ø–æ–≤

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å:**
1. **–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞:**
   - Drag-and-drop –∑–æ–Ω–∞
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ PNG, JPG, JPEG
   - –ü—Ä–µ–≤—å—é –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

2. **–ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞:**
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `isImageSuitableForPotrace()`
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç Potrace –¥–ª—è —á/–± –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ ImageTracer:**
   - –ö–∞—á–µ—Å—Ç–≤–æ: low / medium / high
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ü–≤–µ—Ç–æ–≤: 4-32 (—Å–ª–∞–π–¥–µ—Ä)

4. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ Potrace:**
   - –ü–æ—Ä–æ–≥ (threshold): 0-255 (—Å–ª–∞–π–¥–µ—Ä)
   - –§–∏–ª—å—Ç—Ä –¥–µ—Ç–∞–ª–µ–π (turdSize): 1-10 (—Å–ª–∞–π–¥–µ—Ä)
   - –¶–≤–µ—Ç: –≤—ã–±–æ—Ä —á–µ—Ä–µ–∑ color picker

5. **–î–µ–π—Å—Ç–≤–∏—è:**
   - –ö–Ω–æ–ø–∫–∞ "–û—Ç–º–µ–Ω–∞"
   - –ö–Ω–æ–ø–∫–∞ "–í–µ–∫—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å" —Å –∏–Ω–¥–∏–∫–∞—Ü–∏–µ–π –ø—Ä–æ—Ü–µ—Å—Å–∞
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –Ω–∞ —Ö–æ–ª—Å—Ç

**–°—Ç–∏–ª–∏:**
- –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π overlay —Å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ–º
- –ë–µ–ª–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –∑–∞–∫—Ä—É–≥–ª—ë–Ω–Ω—ã–º–∏ —É–≥–ª–∞–º–∏
- –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è —à–∏—Ä–∏–Ω–∞ (90% —ç–∫—Ä–∞–Ω–∞, max 600px)
- –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π (—Å–∏–Ω—è—è/–∂—ë–ª—Ç–∞—è)

---

### ‚úÖ 4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Toolbar

**–§–∞–π–ª:** `src/components/Toolbar/Toolbar.tsx`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `Wand2` –∏–∫–æ–Ω–∫–∏
- –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `VectorizationDialog`
- –î–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ `isVectorizationOpen` (—Å—Ç—Ä–æ–∫–∞ 17)
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ –≤ –º–∞—Å—Å–∏–≤ tools (—Å—Ç—Ä–æ–∫–∞ 132):
  - –ò–∫–æ–Ω–∫–∞: Wand2
  - –ù–∞–∑–≤–∞–Ω–∏–µ: "–í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (Potrace)"
  - –û—Ç–∫—Ä—ã–≤–∞–µ—Ç VectorizationDialog
- –î–æ–±–∞–≤–ª–µ–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤ –∫–æ–Ω–µ—Ü (—Å—Ç—Ä–æ–∫–∞ 222)

---

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ/–º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ:
- `src/components/Toolbar/VectorizationDialog.tsx` - –¥–∏–∞–ª–æ–≥ –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- `src/types/potrace-wasm.d.ts` - –¥–µ–∫–ª–∞—Ä–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤ –¥–ª—è Potrace

### –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ:
- `src/components/Controls/Controls.tsx` - –∫–Ω–æ–ø–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞ SVG
- `src/utils/vectorize.ts` - —Ñ—É–Ω–∫—Ü–∏–∏ Potrace
- `src/components/Toolbar/Toolbar.tsx` - –∫–Ω–æ–ø–∫–∞ –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- `PROJECT_MAP.md` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `map/main.md` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏—è

---

## üß™ –°—Ç–∞—Ç—É—Å —Å–±–æ—Ä–∫–∏

‚úÖ **–ü—Ä–æ–µ–∫—Ç –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫**
- –í—Å–µ –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã –±–µ–∑ –æ—à–∏–±–æ–∫ TypeScript
- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –æ—à–∏–±–∫–∏ –≤ AdminPanel.tsx (–±—ã–ª–∏ –¥–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π)

---

## üìä –ò—Ç–æ–≥–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å –¢–ó

### ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
1. –°–ª–æ–∏ –∏ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (Figma-like)
2. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤ –≤ JSON (localStorage)
3. SVGO –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è SVG
4. –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç–¥–µ–ª—å–Ω—ã—Ö SVG —ç–ª–µ–º–µ–Ω—Ç–æ–≤ - **–¥–æ–±–∞–≤–ª–µ–Ω–∞ UI –∫–Ω–æ–ø–∫–∞**
5. Potrace WASM –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è - **–ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ**

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
- –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ –º–µ—Ç–æ–¥–∞ –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –£–¥–æ–±–Ω—ã–π –¥–∏–∞–ª–æ–≥ —Å –ø—Ä–µ–≤—å—é –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø–æ –≤—ã–±–æ—Ä—É –º–µ—Ç–æ–¥–∞

---

## üéØ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ –¢–ó —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã

–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Å–æ –≤—Å–µ–º–∏ –∑–∞–ø—Ä–æ—à–µ–Ω–Ω—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏.
